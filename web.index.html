<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grupos de InvestigaciÃ³n</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body { background: #f8f9fa; }
    .card { transition: transform .2s; }
    .card:hover { transform: scale(1.02); }
    .fade-in { animation: fadeIn 0.6s ease-in; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="container py-4">

  <h1 class="text-center mb-4">ğŸŒŸ GestiÃ³n de Grupos de InvestigaciÃ³n ğŸŒŸ</h1>

  <div id="alertas"></div>

  <!-- BotÃ³n limpiar -->
  <div class="text-end mb-3">
    <button id="btnLimpiar" class="btn btn-danger">ğŸ—‘ï¸ Limpiar Todo</button>
  </div>

  <!-- Grupos -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-primary text-white">
      <h2 class="h5 m-0">Grupos de InvestigaciÃ³n</h2>
    </div>
    <div class="card-body">
      <button id="btnCargar" class="btn btn-outline-primary mb-3">Mostrar Grupos</button>
      <ul id="listaGrupos" class="list-group"></ul>
    </div>
  </div>

  <!-- Docentes -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-success text-white">
      <h2 class="h5 m-0">Registrar Docente</h2>
    </div>
    <div class="card-body">
      <form id="formDocente" class="row g-2">
        <div class="col-md-4"><input type="text" class="form-control" name="nombre" placeholder="Nombre docente" required></div>
        <div class="col-md-4"><input type="text" class="form-control" name="formacion" placeholder="FormaciÃ³n acadÃ©mica" required></div>
        <div class="col-md-4"><input type="text" class="form-control" name="horario" placeholder="Horario de atenciÃ³n" required></div>
        <div class="col-md-6">
          <select class="form-control" name="grupo">
            <option value="COMBA I+D">COMBA I+D</option>
            <option value="GIEIAM">GIEIAM</option>
          </select>
        </div>
        <div class="col-md-6"><button type="submit" class="btn btn-success w-100">Registrar</button></div>
      </form>
      <ul id="listaDocentes" class="list-group mt-3"></ul>
    </div>
  </div>

  <!-- Estudiantes -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-info text-white">
      <h2 class="h5 m-0">Vincular Estudiante a Semillero</h2>
    </div>
    <div class="card-body">
      <form id="formEstudiante" class="row g-2">
        <div class="col-md-4"><input type="text" class="form-control" name="nombre" placeholder="Nombre estudiante" required></div>
        <div class="col-md-4"><input type="text" class="form-control" name="codigo" placeholder="CÃ³digo estudiantil" required></div>
        <div class="col-md-4"><input type="text" class="form-control" name="carrera" placeholder="Carrera" required></div>
        <div class="col-md-6">
          <select class="form-control" name="semillero">
            <option value="Semillero COMBA">Semillero COMBA</option>
            <option value="Semillero Informa">Semillero Informa</option>
          </select>
        </div>
        <div class="col-md-6"><button type="submit" class="btn btn-info w-100">Vincular</button></div>
      </form>
      <ul id="listaEstudiantes" class="list-group mt-3"></ul>
    </div>
  </div>

  <!-- Actividades -->
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-warning">
      <h2 class="h5 m-0">Agregar Actividad a Semillero</h2>
    </div>
    <div class="card-body">
      <form id="formActividad" class="row g-2">
        <div class="col-md-4"><input type="text" class="form-control" name="tipo" placeholder="Tipo (taller, conferencia...)" required></div>
        <div class="col-md-4"><input type="date" class="form-control" name="fecha" required></div>
        <div class="col-md-4"><input type="time" class="form-control" name="hora" required></div>
        <div class="col-md-6"><input type="number" class="form-control" name="limite" placeholder="LÃ­mite asistentes" required></div>
        <div class="col-md-6"><textarea class="form-control" name="resumen" placeholder="Resumen" required></textarea></div>
        <div class="col-md-12"><button type="submit" class="btn btn-warning w-100">Agregar</button></div>
      </form>
      <ul id="listaActividades" class="list-group mt-3"></ul>
    </div>
  </div>

  <script>
    // Datos iniciales
    const grupos = [
      { nombre: "COMBA I+D", objetivos: "Investigar en cÃ³mputo y matemÃ¡ticas aplicadas", director: "Dr. PÃ©rez" },
      { nombre: "GIEIAM", objetivos: "InvestigaciÃ³n en ingenierÃ­a ambiental y materiales", director: "Dra. GÃ³mez" }
    ];

    const getData = (k) => JSON.parse(localStorage.getItem(k)) || [];
    const setData = (k, d) => localStorage.setItem(k, JSON.stringify(d));

    const listaGrupos = document.getElementById("listaGrupos");
    const listaDocentes = document.getElementById("listaDocentes");
    const listaEstudiantes = document.getElementById("listaEstudiantes");
    const listaActividades = document.getElementById("listaActividades");
    const alertas = document.getElementById("alertas");

    // Mostrar alertas bonitas
    function showAlert(msg, type="success") {
      const div = document.createElement("div");
      div.className = `alert alert-${type} fade-in`;
      div.textContent = msg;
      alertas.appendChild(div);
      setTimeout(() => div.remove(), 3000);
    }

    // Renderizadores
    function renderDocentes() {
      listaDocentes.innerHTML = "";
      getData("docentes").forEach(d => {
        listaDocentes.innerHTML += `<li class="list-group-item fade-in">ğŸ‘¨â€ğŸ« ${d.nombre} (${d.formacion}) - ${d.grupo} - Horario: ${d.horario}</li>`;
      });
    }
    function renderEstudiantes() {
      listaEstudiantes.innerHTML = "";
      getData("estudiantes").forEach(e => {
        listaEstudiantes.innerHTML += `<li class="list-group-item fade-in">ğŸ“ ${e.nombre} - CÃ³digo: ${e.codigo} - ${e.carrera} (${e.semillero})</li>`;
      });
    }
    function renderActividades() {
      listaActividades.innerHTML = "";
      getData("actividades").forEach(a => {
        listaActividades.innerHTML += `<li class="list-group-item fade-in">ğŸ“… <strong>${a.tipo}</strong> - ${a.fecha} ${a.hora} (Cupo: ${a.limite})<br>${a.resumen}</li>`;
      });
    }

    // Eventos
    document.getElementById("btnCargar").addEventListener("click", () => {
      listaGrupos.innerHTML = "";
      grupos.forEach(g => {
        listaGrupos.innerHTML += `<li class="list-group-item fade-in"><strong>${g.nombre}</strong><br>ğŸ¯ ${g.objetivos}<br>ğŸ‘©â€ğŸ”¬ Director: ${g.director}</li>`;
      });
    });

    document.getElementById("formDocente").addEventListener("submit", e => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(e.target).entries());
      const docs = getData("docentes"); docs.push(data); setData("docentes", docs);
      e.target.reset(); renderDocentes(); showAlert("Docente registrado âœ…");
    });

    document.getElementById("formEstudiante").addEventListener("submit", e => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(e.target).entries());
      const est = getData("estudiantes"); est.push(data); setData("estudiantes", est);
      e.target.reset(); renderEstudiantes(); showAlert("Estudiante vinculado âœ…","info");
    });

    document.getElementById("formActividad").addEventListener("submit", e => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(e.target).entries());
      const acts = getData("actividades"); acts.push(data); setData("actividades", acts);
      e.target.reset(); renderActividades(); showAlert("Actividad agregada ğŸ“Œ","warning");
    });

    document.getElementById("btnLimpiar").addEventListener("click", () => {
      localStorage.clear();
      renderDocentes(); renderEstudiantes(); renderActividades();
      showAlert("Todos los datos fueron eliminados ğŸ—‘ï¸","danger");
    });

    // Inicial
    renderDocentes(); renderEstudiantes(); renderActividades();
  </script>
</body>
</html>
